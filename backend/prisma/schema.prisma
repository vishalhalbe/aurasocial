generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 String           @id @default(cuid())
  email              String           @unique
  passwordHash       String?
  name               String
  onboardingComplete Boolean          @default(false)
  createdAt          DateTime         @default(now())
  updatedAt          DateTime         @updatedAt

  socialAccounts     SocialAccount[]
  posts              ScheduledPost[]
  subscription       Subscription?
}

model SocialAccount {
  id            String   @id @default(cuid())
  platform      String
  accessToken   String
  refreshToken  String?
  userId        String
  user          User     @relation(fields: [userId], references: [id])
  createdAt     DateTime @default(now())
}

model ScheduledPost {
  id           String   @id @default(cuid())
  content      String
  mediaUrl     String?
  scheduledFor DateTime
  posted       Boolean  @default(false)
  platform     String
  userId       String
  user         User     @relation(fields: [userId], references: [id])
  createdAt    DateTime @default(now())
}

model Subscription {
  id             String   @id @default(cuid())
  stripeCustomer String
  stripeSubId    String
  plan           String
  status         String
  currentPeriodEnd DateTime
  userId         String   @unique 
  user           User     @relation(fields: [userId], references: [id])
}


